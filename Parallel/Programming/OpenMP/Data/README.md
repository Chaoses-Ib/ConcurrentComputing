# Data Environment
## Data-Sharing Attribute Rules
### Variables Referenced in a Construct
The data-sharing attributes of variables that are referenced in a construct can be *predetermined*, *explicitly determined*, or *implicitly determined*, according to the rules.
- Certain variables and objects have *predetermined* data-sharing attributes for the construct in which they are referenced.
- Variables with *explicitly determined* data-sharing attributes are those that are referenced in a given construct and are listed in a data-sharing attribute clause on the construct.
- Variables with implicitly determined data-sharing attributes are those that are referenced in a given construct and do not have predetermined or explicitly determined data-sharing attributes in that construct.

#### Implicitly determined
- In a `parallel` construct, if no `default` clause is present, these variables are shared.


## `threadprivate` Directive
```c++
int global;
#pragma omp threadprivate(global)
```
The `threadprivate` directive speciﬁes that variables are replicated, with each thread having its own copy. 


## Data-Sharing Attribute Clauses
### `default` Clause
The `default` clause determines the implicit data-sharing attribute of certain variables that are referenced in the construct.

### `shared` Clause
The `shared` clause declares one or more list items to be shared by tasks generated by the construct on which it appears. All references to a list item within a task refer to the storage area of the original variable at the point the directive was encountered.

### `private` Clause
```c++
int tid;
#pragma omp parallel private(tid)
{
	tip = omp_get_thread_num();
}
```
The `private` clause speciﬁes that its list items are to be privatized. Each task or SIMD lane that references a list item in the construct receives only one new list item, unless the construct has one or more associated loops and an `order` clause that speciﬁes `concurrent` is also present.

### `firstprivate` Clause
A list item that appears in a `firstprivate` clause is subject to the `private` clause semantics. In addition, the new list item is initialized from the original list item that exists before the construct.

### `lastprivate` Clause
In addition, when a `lastprivate` clause without the `conditional` modiﬁer appears on a directive and the list item is not an iteration variable of any associated loop, the value of each new list item from the sequentially last iteration of the associated loops, or the lexically last structured block sequence associated with a `sections` construct, is assigned to the original list item.


## Data Copying Clauses
### `copyin` Clause
```c++
int global;
#pragma omp threadprivate(global)

global = 10;
#pragma omp parallel copyin(global)
{
	printf("%d", global);  // 10
}
```
The `copyin` clause provides a mechanism to copy the value of a threadprivate variable of the primary thread to the threadprivate variable of each other member of the team that is executing the `parallel` region.

### `copyprivate` Clause
```
#pragma omp parallel
{
	#pragma omp single copyprivate(global)
	{
		global = 123;
	}
	printf("%d", global);  // 123
}
```
The `copyprivate` clause provides a mechanism to use a private variable to broadcast a value from the data environment of one implicit task to the data environments of the other implicit tasks that belong to the parallel region.